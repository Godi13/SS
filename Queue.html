<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Queue</title>
</head>
<body>
  <script type="text/javascript">
    function Queue() {
      this.dataStore = []; //保存栈内元素
      this.enqueue = enqueue; //向队尾增加一个元素
      this.dequeue = dequeue; //删除队首元素
      this.front = front; //读取队首元素
      this.back = back; //读取队尾元素
      this.toString = toString; //显示对队列中的所有元素
      this.empty = empty; //判断队列是否为空
    }

    function enqueue(element) {
      this.dataStore.push(element);
    }

    function dequeue() {
      return this.dataStore.shift();
    }

    function front() {
      return this.dataStore[0];
    }

    function back() {
      return this.dataStore[this.dataStore.length - 1];
    }

    function toString() {
      var reStr = "";
      for (var i = 0; i < this.dataStore.length; i++) {
        reStr += this.dataStore[i] + "\n";
      }
      return reStr;
    }

    function empty() {
      if (this.dataStore.length === 0) {
        return true;
      } else {
        return false;
      }
    }

    // var q = new Queue();
    // q.enqueue("First");
    // q.enqueue("Second");
    // q.enqueue("Third");
    // console.info(q.toString());
    // console.log("出队啦");
    // q.dequeue();
    // console.info(q.toString());

    // 优先级示例
    function Patient(name, code) {
      this.name = name;
      this.code = code;
    }

    function dequeue() {
      var priority = 0;
      for (var i = 1; i < this.dataStore.length; ++i) {
        if (this.dataStore[i].code > this.dataStore[priority].code) {
          priority = i;
        }
      }
      return this.dataStore.splice(priority, 1);
    }

    function toString() {
      var retStr = "";
      for (var i = 0; i < this.dataStore.length; ++i) {
        retStr += this.dataStore[i].name + " code:" + this.dataStore[i].code + "\n";
      }
      return retStr;
    }

    var pa = new Patient("小李", 2);
    var pa1 = new Patient("小王", 4);
    var pa2 = new Patient("小张", 9);
    var pa3 = new Patient("小周", 6);
    var pa4 = new Patient("小阮", 1);

    var quePatient = new Queue();
    quePatient.enqueue(pa);
    quePatient.enqueue(pa1);
    quePatient.enqueue(pa2);
    quePatient.enqueue(pa3);
    quePatient.enqueue(pa4);

    console.info(quePatient.dequeue());
    console.info(quePatient.toString());
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chain</title>
</head>
<body>
  <script type="text/javascript">
    function Node(element) {
      this.element = element; //保存节点上的数据
      this.next = null; //保存指向下一个节点的链接
      this.previous = null;
    }

    function Chain() {
      this.head = new Node("head");
      this.find = find;
      this.findPrevious = findPrevious;
      this.insert = insert;
      this.remove = remove;
      this.display = display;
      this.displReverse = displReverse;
      this.findLast = findLast;
    }

    function find(item) {
      var currNode = this.head;
      while (currNode.element != item) {
        currNode = currNode.next;
      }
      return currNode;
    }

    function insert(newElement, item) {
      var newNode = new Node(newElement);
      var currNode = this.find(item);
      newNode.next = currNode.next;
      newNode.previous = currNode;
      currNode.next = newNode;
    }

    function findPrevious(item) {
      var currNode = this.head;
      while (!(currNode.next == null) && (currNode.next.element != item)) {
        currNode = currNode.next;
      }
      return currNode;
    }

    function remove(item) {
      var currNode = this.find(item);
      if (!(currNode.next == null)) {
        currNode.previous.next = currNode.next;
        currNode.next.previous = currNode.previous;
        currNode.next = null;
        currNode.previous = null;
      } else {
        currNode.previous.next = null;
        currNode.previous = null;
      }
    }

    function display() {
      var currNode = this.head;
      while (!(currNode.next == null)) {
        console.log(currNode.next.element);
        currNode = currNode.next;
      }
    }

    function findLast() {
      var currNode = this.head;
      while (!(currNode.next == null)) {
        currNode = currNode.next;
      }
      return currNode;
    }

    function displReverse() {
      var currNode = this.findLast();
      while (!(currNode.previous == null)) {
        console.log(currNode.element);
        currNode = currNode.previous;
      }
    }

    var cities = new Chain();
    cities.insert("first", "head");
    cities.insert("second", "first");
    cities.insert("three", "second");
    cities.display();
    console.warn("========华丽的分割线==========");
    cities.displReverse();
    cities.remove("second");
    console.warn("========华丽的分割线==========");
    cities.display();
  </script>
</body>
</html>
